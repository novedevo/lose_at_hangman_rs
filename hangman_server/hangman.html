<!DOCTYPE html>
<html lang="en-CA">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Devon Sawatsky Burnham">

    <title>Lose at Hangman</title>

    <style>
        #playarea {
            display: flex;

        }

        #playarea button {
            font-size: 20px;
            background-color: aliceblue;
            /* color: white; */
            border: 2px solid cornflowerblue;
            border-radius: 8px;
            padding: 2px;
            margin: 2px;
            min-width: 1rem;
        }
    </style>
</head>

<body>

    <div class="content">
        <h1>Lose at Hangman</h1>
        <main id="gameboard">
            <label id="letterQuery">How many letters is your word?</label>
            <input type="number" id="num_letters"></input>
            <button type="button" onclick="updateValue()" id="submit">Submit</button>
            <div id="playarea"></div>
            
        </main>
    </div>

</body>

</html>

<script defer>
    const numLettersInput = document.querySelector('input');

    // numLettersInput.addEventListener("input", updateValue);

    let currentLetter = " ";
    let pattern = "";

    function updateValue() {

        console.log("clicked")
        let element = document.getElementById("playarea");

        console.log(numLettersInput.valueAsNumber);

        while (element.hasChildNodes()) {
            element.removeChild(element.lastChild);
        }

        if (isNaN(numLettersInput.valueAsNumber) || numLettersInput.valueAsNumber < 1) {
            let p = document.createElement("p");
            p.innerText = "please only submit positive numbers. my code is fragile and so am i";
            element.appendChild(p);
            return;
        }

        pattern = "";

        for (let i = 0; i < numLettersInput.valueAsNumber; i++) {
            let button = document.createElement("button");
            button.id = "letterbox" + i;
            button.innerText = " ";
            button.setAttribute("onclick", "setButton(" + i + ")");
            // button.onclick = "setButton(" + i + ")";
            element.appendChild(button);
            pattern += ".";
        }

        let main = document.getElementById("gameboard");
        main.removeChild(document.getElementById("letterQuery"));
        main.removeChild(document.getElementById("num_letters"));
        main.removeChild(document.getElementById("submit"));

        let guessContainer = document.createElement("p");
        guessContainer.id = "lastGuess";
        guessContainer.innerText = "No guesses yet";
        let guessButton = document.createElement("button");
        guessButton.type = "button"
        guessButton.setAttribute("onclick", "getNewGuess()");
        guessButton.innerText = "Give me a guess!";
        let resetButton = document.createElement("button");
        resetButton.type = "button"
        resetButton.setAttribute("onclick", "reset()");
        resetButton.innerText = "Reset to defaults";

        main.appendChild(guessContainer);
        main.appendChild(guessButton);
        main.appendChild(resetButton);

        console.log("buttons created");
    }
    function setButton(i) {
        const button = document.getElementById("letterbox" + i);
        if (button.innerText === " ") {
            button.innerText = currentLetter;
        } else if (button.innerText === currentLetter) {
            button.innerText = " ";
        }
    }
    function getNewGuess() {
        let guessContainer = document.getElementById("lastGuess");
        currentLetter = "E";
        guessContainer.innerText = currentLetter;
        console.log(pattern);
    }
    function reset() {

    }
</script>